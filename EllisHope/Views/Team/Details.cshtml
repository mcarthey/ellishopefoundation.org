@model EllisHope.Models.Domain.ApplicationUser
@inject IConfiguration Configuration
@{
    ViewBag.Title = $"{Model.FullName} - Board Member";
    Layout = "~/Views/Shared/_Layout.cshtml";
    var foundation = Configuration.GetSection("Foundation");
    var profileImage = !string.IsNullOrEmpty(Model.ProfilePictureUrl)
        ? Model.ProfilePictureUrl
        : "/assets/img/avatars/avatar-01.png";

    // Email obfuscation - split into parts for bot protection
    var emailUser = "";
    var emailDomain = "";
    if (!string.IsNullOrEmpty(Model.Email))
    {
        var emailParts = Model.Email.Split('@');
        emailUser = emailParts.Length > 0 ? emailParts[0] : "";
        emailDomain = emailParts.Length > 1 ? emailParts[1] : "";
    }
}

<main>

    <!-- page-title-area start -->
    <div class="page-title-area">
        <div class="breadcrumb-wrapper" data-background="/assets/img/templates/team/header-banner.jpg">
            <img class="shape-1" src="~/assets/img/shape/shape-81.png" alt="shape">
            <img class="shape-2" src="~/assets/img/shape/shape-82.png" alt="shape">
            <div class="container">
                <div class="breadcrumb-content text-center">
                    <h2 class="breadcrumb-title">Board Member Details</h2>
                    <ul class="breadcrumb-menu">
                        <li>
                            <a href="/home/">Home</a>
                        </li>
                        <li>
                            <a href="/team">Board Members</a>
                        </li>
                        <li>
                            <a href="#">@Model.FullName</a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
    <!-- page-title-area end -->
    <!-- ht-team-details-content start -->
    <div class="ht-team-details-content pt-140 pb-140 pt-lg-100 pb-lg-100" data-bg-color="#FDF3F0">
        <div class="container">
            <div class="biography-content-wrap">
                <div class="row align-items-center">
                    <div class="col-xl-6 col-lg-6">
                        <div class="team-biography text-lg-start text-center">
                            <img class="img-fluid" src="@profileImage" alt="@Model.FullName" style="object-fit: cover; max-height: 600px;">
                        </div>
                    </div>
                    <div class="col-xl-6 col-lg-6">
                        <div class="biography-content">
                            <p class="designation">Board Member</p>
                            <h2 class="name">
                                @Model.FullName
                            </h2>
                            <p class="description">
                                @Model.FirstName is a dedicated board member of the Ellis Hope Foundation,
                                committed to empowering health, fitness, and hope in our community.
                            </p>
                            @if (!string.IsNullOrEmpty(Model.Email))
                            {
                                <h5 class="addres-line">
                                    <span>Email:</span>
                                    <a href="#" class="obfuscated-email"
                                       data-user="@emailUser"
                                       data-domain="@emailDomain">
                                        <span class="email-text">@(emailUser)[at]@(emailDomain)</span>
                                    </a>
                                </h5>
                            }
                            @if (Model.JoinedDate != default)
                            {
                                <h5 class="addres-line"><span>Board Member Since:</span> @Model.JoinedDate.ToString("MMMM yyyy")</h5>
                            }
                        </div>
                    </div>
                </div>
            </div>
            <div class="row mt-60">
                <div class="col-12 text-center">
                    <a href="/team" class="btn btn-primary">
                        <i class="bi bi-arrow-left me-2"></i> Back to Board Members
                    </a>
                    <a href="/contact" class="btn btn-outline-primary ms-3">
                        Contact Us
                    </a>
                </div>
            </div>
        </div>
    </div>
    <!-- ht-team-details-content end -->

</main>

@section Scripts {
    <script>
        // Replace [at] with @@ for users with JavaScript enabled
        // Bots without JS execution will see the obfuscated version
        document.addEventListener('DOMContentLoaded', function() {
            var emailLinks = document.querySelectorAll('.obfuscated-email');
            emailLinks.forEach(function(link) {
                var user = link.dataset.user;
                var domain = link.dataset.domain;
                if (user && domain) {
                    link.innerHTML = user + '@@' + domain;
                    link.href = 'mailto:' + user + '@@' + domain;
                }
            });
        });
    </script>
}
