@model EllisHope.Models.Domain.BlogPost
@{
    ViewBag.Title = Model.Title;
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<main>

<!-- page-title-area start -->
<div class="page-title-area">
    <div class="breadcrumb-wrapper" data-background="/assets/img/templates/blog/header-banner.jpg">
        <img class="shape-1" src="~/assets/img/shape/shape-81.png" alt="shape">
        <img class="shape-2" src="~/assets/img/shape/shape-82.png" alt="shape">
        <div class="container">
            <div class="breadcrumb-content text-center">
                <h2 class="breadcrumb-title">@Model.Title</h2>
                <ul class="breadcrumb-menu">
                    <li>
                        <a href="/">Home</a>
                    </li>
                    <li>
                        <a href="/blog">Blog</a>
                    </li>
                    <li>
                        <a href="#">@Model.Title</a>
                    </li>
                </ul>
            </div>
        </div>
    </div>
</div>
<!-- page-title-area end -->
<!--blog-details-section start-->
<div class="blog-details-section pt-180 pt-lg-100 pb-95 pb-lg-40">
<div class="container">
<div class="row">
<div class="col-lg-8">
<div class="blog-details-wrapper mb-45">
<div class="classic-style">
    <h2 class="blog-title mb-5">
        @Model.Title
    </h2>
    @if (!string.IsNullOrEmpty(Model.FeaturedImageUrl))
    {
        <div class="blog-thumb mb-4">
            <img class="w-100" src="@Model.FeaturedImageUrl" alt="@Model.Title">
        </div>
    }
    <div class="blog-content">
        <div class="blog-meta">
            <a href="#">@Model.AuthorName</a>
            <span class="divider"></span>
            @if (Model.PublishedDate.HasValue)
            {
                <span>@Model.PublishedDate.Value.ToString("MMMM dd, yyyy")</span>
            }
        </div>
        @if (!string.IsNullOrEmpty(Model.Excerpt))
        {
            <p class="fs-22">
                @Model.Excerpt
            </p>
        }
    </div>
</div>

<div class="blog-content-full mt-4">
    @Html.Raw(Model.Content)
</div>

@if (!string.IsNullOrEmpty(Model.Tags))
{
    <div class="row media-content pt-30 mb-80">
        <div class="col-md-6">
            <div class="tagcloud mb-30">
                <span>Tags :</span>
                @{
                    var tags = Model.Tags.Split(',', StringSplitOptions.RemoveEmptyEntries | StringSplitOptions.TrimEntries);
                }
                @foreach (var tag in tags)
                {
                    <a href="/blog?search=@tag">@tag</a>
                }
            </div>
        </div>
        <div class="col-md-6 text-md-end text-center">
            <div class="social-media mb-30">
                <span>Share :</span>
                <a href="https://www.facebook.com/sharer/sharer.php?u=@Url.Action("Details", "Blog", new { slug = Model.Slug }, Context.Request.Scheme)" target="_blank">
                    <img src="~/assets/img/icon/facebook.svg" alt="Facebook">
                </a>
                <a href="https://twitter.com/intent/tweet?url=@Url.Action("Details", "Blog", new { slug = Model.Slug }, Context.Request.Scheme)&text=@Model.Title" target="_blank">
                    <img src="~/assets/img/icon/twitter.svg" alt="Twitter">
                </a>
                <a href="https://www.linkedin.com/shareArticle?mini=true&url=@Url.Action("Details", "Blog", new { slug = Model.Slug }, Context.Request.Scheme)&title=@Model.Title" target="_blank">
                    <img src="~/assets/img/icon/linkedin.svg" alt="LinkedIn">
                </a>
            </div>
        </div>
    </div>
}
else
{
    <div class="row media-content pt-30 mb-80">
        <div class="col-md-12 text-md-end text-center">
            <div class="social-media mb-30">
                <span>Share :</span>
                <a href="https://www.facebook.com/sharer/sharer.php?u=@Url.Action("Details", "Blog", new { slug = Model.Slug }, Context.Request.Scheme)" target="_blank">
                    <img src="~/assets/img/icon/facebook.svg" alt="Facebook">
                </a>
                <a href="https://twitter.com/intent/tweet?url=@Url.Action("Details", "Blog", new { slug = Model.Slug }, Context.Request.Scheme)&text=@Model.Title" target="_blank">
                    <img src="~/assets/img/icon/twitter.svg" alt="Twitter">
                </a>
                <a href="https://www.linkedin.com/shareArticle?mini=true&url=@Url.Action("Details", "Blog", new { slug = Model.Slug }, Context.Request.Scheme)&title=@Model.Title" target="_blank">
                    <img src="~/assets/img/icon/linkedin.svg" alt="LinkedIn">
                </a>
            </div>
        </div>
    </div>
}

<!-- Comments section removed for now - can be added later with a comments system -->

</div>
</div>
<div class="col-lg-4">
    <div class="blog-sidebar mb-40 ps-xxl-4">
        <!-- Search Widget -->
        <div class="widget widget-search mb-50">
            <h3 class="widget-title">Search</h3>
            <form class="search-form" asp-controller="Blog" asp-action="Index" method="get">
                <input type="text" name="search" placeholder="Search">
                <button class="widget-btn" type="submit">
                    <i class="bi bi-search"></i>
                </button>
            </form>
        </div>

        <!-- Categories Widget -->
        @{
            var categories = ViewBag.Categories as IEnumerable<EllisHope.Models.Domain.BlogCategory>;
        }
        @if (categories != null && categories.Any())
        {
            <div class="widget category-widget-content">
                <h3 class="widget-title">Categories</h3>
                <ul class="list-unstyled category-widget mb-0">
                    @foreach (var category in categories)
                    {
                        var count = category.BlogPostCategories?.Count ?? 0;
                        <li>
                            <a href="/blog?category=@category.Id">
                                @category.Name <span class="float-end">(@count)</span>
                            </a>
                        </li>
                    }
                </ul>
            </div>
        }

        <!-- Recent Posts Widget -->
        @{
            var recentPosts = ViewBag.RecentPosts as IEnumerable<EllisHope.Models.Domain.BlogPost>;
        }
        @if (recentPosts != null && recentPosts.Any())
        {
            <div class="widget widget-post mt-50">
                <h3 class="widget-title">Recent Posts</h3>
                @foreach (var recentPost in recentPosts)
                {
                    <article class="recent-post mb-20">
                        @if (!string.IsNullOrEmpty(recentPost.FeaturedImageUrl))
                        {
                            <a href="/blog/details/@recentPost.Slug">
                                <figure class="post-thumb" style="background-image: url('@recentPost.FeaturedImageUrl')">
                                </figure>
                            </a>
                        }
                        <div class="post-content mb-2">
                            <h5 class="post-title">
                                <a href="/blog/details/@recentPost.Slug">
                                    @recentPost.Title
                                </a>
                            </h5>
                            @if (recentPost.PublishedDate.HasValue)
                            {
                                <span class="date">
                                    <i class="bi bi-clock"></i> @recentPost.PublishedDate.Value.ToString("MMM dd, yyyy")
                                </span>
                            }
                        </div>
                    </article>
                }
            </div>
        }

        <!-- Tags Widget -->
        @{
            var allTags = ViewBag.AllTags as IEnumerable<string>;
        }
        @if (allTags != null && allTags.Any())
        {
            <div class="widget widget-categories-tag mt-50">
                <h3 class="widget-title">Tags</h3>
                <div class="tagcloud">
                    @foreach (var tag in allTags)
                    {
                        <a href="/blog?search=@tag">@tag</a>
                    }
                </div>
            </div>
        }
    </div>
</div>
</div>
</div>
</div>
<!--blog-details-section end-->
<!-- newsletter-section start -->
<div class="newsletter-section position-relative z-1">
    <img class="shape-1 position-absolute ml-100 mt-50 d-none d-lg-inline-block"
         src="~/assets/img/shape/shape-8.png" alt="shape">
    <div class="container">
        <div class="row align-items-center newsletter-border pt-50">
            <div class="col-lg-6">
                <div class="title-one text-lg-start text-center">
                    <h2 class="title">Subscribe to Regular Newsletters.</h2>
                </div>
            </div>
            <div class="col-lg-6">
                <div class="subscribe-form sub-form-2 text-lg-end mb-25">
                    <input type="text" placeholder="Enter Your Mail">
                    <button type="submit">Subscribe</button>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- newsletter-section end -->

</main>
