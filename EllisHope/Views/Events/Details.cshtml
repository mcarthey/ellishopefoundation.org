@model EllisHope.Models.Domain.Event
@{
    ViewBag.Title = Model.Title;
    Layout = "~/Views/Shared/_Layout.cshtml";
    var recentEvents = ViewBag.RecentEvents as IEnumerable<EllisHope.Models.Domain.Event> ?? Enumerable.Empty<EllisHope.Models.Domain.Event>();
    var similarEvents = ViewBag.SimilarEvents as IEnumerable<EllisHope.Models.Domain.Event> ?? Enumerable.Empty<EllisHope.Models.Domain.Event>();
    var tags = !string.IsNullOrEmpty(Model.Tags)
        ? Model.Tags.Split(',', StringSplitOptions.RemoveEmptyEntries | StringSplitOptions.TrimEntries)
        : Array.Empty<string>();
}

<main>

<!-- page-title-area start -->
<div class="page-title-area">
        <div class="breadcrumb-wrapper" data-background="/assets/img/templates/events/header-banner.jpg">
        <img class="shape-1" src="~/assets/img/shape/shape-81.png" alt="shape">
        <img class="shape-2" src="~/assets/img/shape/shape-82.png" alt="shape">
        <div class="container">
            <div class="breadcrumb-content text-center">
                <h2 class="breadcrumb-title">Event Details</h2>
                <ul class="breadcrumb-menu">
                    <li>
                        <a href="/home/">Home</a>
                    </li>
                    <li>
                        <a href="/events">Events</a>
                    </li>
                    <li>
                        <a href="#">@Model.Title</a>
                    </li>
                </ul>
            </div>
        </div>
    </div>
</div>
<!-- page-title-area end -->

<!-- event-section start -->
<section class="event-section pt-180 pb-120 pt-lg-100 pb-lg-10">
    <div class="container">
        <div class="event-details-content mb-40">
            <h2 class="event-main-title mb-25">
                @Model.Title
            </h2>
            <div class="event-thumb mb-50 mt-50">
                @if (!string.IsNullOrEmpty(Model.FeaturedImageUrl))
                {
                    <img class="w-100" src="@Model.FeaturedImageUrl" alt="@Model.Title">
                }
                else
                {
                    <img class="w-100" src="~/assets/img/event/event-details-1320x743.jpg" alt="@Model.Title">
                }
                <div class="event-date">@Model.EventDate.Day <span>@Model.EventDate.ToString("MMM")</span></div>
                <div class="event-place">
                    @Model.Location
                </div>
            </div>
            <div class="event-content">
                <div class="row">
                    <div class="col-lg-8">
                        <ul class="event-details-info d-md-flex flex-wrap justify-content-between">
                            <li>
                                <h4 class="info-title">Details</h4>
                            </li>
                            <li>
                                <div class="info-label">Date:</div>
                                <p class="info">@Model.EventDate.ToString("MMM dd, yyyy")</p>
                            </li>
                            @if (Model.StartTime.HasValue && Model.EndTime.HasValue)
                            {
                                <li>
                                    <div class="info-label">Time:</div>
                                    <p class="info">@Model.StartTime.Value.ToString(@"hh\:mm") - @Model.EndTime.Value.ToString(@"hh\:mm")</p>
                                </li>
                            }
                            @if (!string.IsNullOrEmpty(Model.RegistrationUrl))
                            {
                                <li>
                                    <div class="info-label">Register:</div>
                                    <p class="info"><a href="@Model.RegistrationUrl" target="_blank">Click here</a></p>
                                </li>
                            }
                        </ul>
                        @if (!string.IsNullOrEmpty(Model.OrganizerName) || !string.IsNullOrEmpty(Model.OrganizerEmail) || !string.IsNullOrEmpty(Model.OrganizerPhone))
                        {
                            <ul class="event-details-info d-md-flex flex-wrap justify-content-between border-top-0">
                                <li>
                                    <h4 class="info-title">Organizer</h4>
                                </li>
                                @if (!string.IsNullOrEmpty(Model.OrganizerName))
                                {
                                    <li>
                                        <div class="info-label">Name:</div>
                                        <p class="info">@Model.OrganizerName</p>
                                    </li>
                                }
                                @if (!string.IsNullOrEmpty(Model.OrganizerPhone))
                                {
                                    <li>
                                        <div class="info-label">Phone:</div>
                                        <p class="info">@Model.OrganizerPhone</p>
                                    </li>
                                }
                                @if (!string.IsNullOrEmpty(Model.OrganizerEmail))
                                {
                                    <li>
                                        <div class="info-label">Email:</div>
                                        <p class="info">@Model.OrganizerEmail</p>
                                    </li>
                                }
                            </ul>
                        }
                        <h3 class="event-title mt-55">
                            <a href="#">Overview</a>
                        </h3>
                        <div class="description">
                            @Html.Raw(Model.Description)
                        </div>
                    </div>
                    <div class="col-lg-4">
                        <div class="event-sidebar mb-40">
                            @if (recentEvents.Any())
                            {
                                <div class="widget widget-post">
                                    <h3 class="widget-title">Recent Events</h3>
                                    @foreach (var recentEvent in recentEvents)
                                    {
                                        <article class="recent-post mb-20">
                                            <a href="/events/details/@recentEvent.Slug">
                                                @if (!string.IsNullOrEmpty(recentEvent.FeaturedImageUrl))
                                                {
                                                    <figure class="post-thumb" style="background-image: url('@recentEvent.FeaturedImageUrl')">
                                                    </figure>
                                                }
                                                else
                                                {
                                                    <figure class="post-thumb" data-background="/assets/img/blog/event1-100x84.jpg">
                                                    </figure>
                                                }
                                            </a>
                                            <div class="post-content mb-2">
                                                <h5 class="post-title">
                                                    <a href="/events/details/@recentEvent.Slug">
                                                        @recentEvent.Title
                                                    </a>
                                                </h5>
                                                <span class="date">
                                                    <i class="bi bi-clock"></i> @recentEvent.EventDate.ToString("MMM dd, yyyy")
                                                </span>
                                            </div>
                                        </article>
                                    }
                                </div>
                            }
                            @if (tags.Any())
                            {
                                <div class="widget widget-categories-tag mt-50">
                                    <h3 class="widget-title">Tags</h3>
                                    <div class="tagcloud">
                                        @foreach (var tag in tags)
                                        {
                                            <a href="/events?search=@tag">@tag</a>
                                        }
                                    </div>
                                </div>
                            }
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
<!-- event-section end -->

<!-- similar events section start -->
@if (similarEvents.Any())
{
    <section class="event-section pt-140 pb-95 pt-lg-60 pb-lg-15" data-bg-color="#FDF3F0">
        <div class="container">
            <div class="row align-items-center justify-content-center mb-20">
                <div class="col-lg-8 col-md-6">
                    <div class="title-one text-md-start text-center mb-30">
                        <h2 class="title">
                            Similar
                            <span class="position-relative">
                                Events
                                <img class="title-img-2"
                                     src="~/assets/img/shape/shape-7.png" alt="shape">
                            </span>
                        </h2>
                    </div>
                </div>
                <div class="col-lg-4 col-md-6">
                    <div class="arrow-style-1 text-md-end text-center mb-30">
                        <button data-slick-prev="#arrow-12" class="slick-prev">
                            <img src="~/assets/img/icon/arrow-left-1.svg" alt="arrow">
                        </button>
                        <button data-slick-next="#arrow-12" class="slick-next">
                            <img src="~/assets/img/icon/arrow-right-1.svg" alt="arrow">
                        </button>
                    </div>
                </div>
            </div>
        </div>
        <div class="container">
            <div id="arrow-12" class="row ht-carousel" data-slide-show="2" data-ml-slide-show="2"
                 data-lg-slide-show="2" data-md-slide-show="2" data-sm-slide-show="1">
                @foreach (var similarEvent in similarEvents)
                {
                    <div class="col-md-6">
                        <div class="event-wrap-1 mb-60">
                            <div class="event-thumb">
                                @if (!string.IsNullOrEmpty(similarEvent.FeaturedImageUrl))
                                {
                                    <img src="@similarEvent.FeaturedImageUrl" alt="@similarEvent.Title">
                                }
                                else
                                {
                                    <img src="~/assets/img/event/event1-630x450.jpg" alt="@similarEvent.Title">
                                }
                                <div class="event-date">@similarEvent.EventDate.Day <span>@similarEvent.EventDate.ToString("MMM")</span></div>
                            </div>
                            <div class="event-content">
                                <div class="event-meta">
                                    @if (similarEvent.StartTime.HasValue && similarEvent.EndTime.HasValue)
                                    {
                                        <a href="#"><i class="bi bi-clock"></i> @similarEvent.StartTime.Value.ToString(@"hh\:mm") - @similarEvent.EndTime.Value.ToString(@"hh\:mm")</a>
                                    }
                                    <a href="#">
                                        <i class="bi bi-geo-alt"></i> @similarEvent.Location
                                    </a>
                                </div>
                                <h3 class="event-title">
                                    <a href="/events/details/@similarEvent.Slug">
                                        @similarEvent.Title
                                    </a>
                                </h3>
                            </div>
                        </div>
                    </div>
                }
            </div>
        </div>
    </section>
}
<!-- event-section end -->

<!-- newsletter-section start -->
<div class="newsletter-section position-relative z-1 pt-180 pt-lg-60">
    <img class="shape-1 position-absolute ml-100 mt-50 d-none d-lg-inline-block"
         src="~/assets/img/shape/shape-8.png" alt="shape">
    <div class="container">
        <div class="row align-items-center">
            <div class="col-lg-6">
                <div class="title-one text-lg-start text-center">
                    <h2 class="title">Subscribe to Regular Newsletters.</h2>
                </div>
            </div>
            <div class="col-lg-6">
                <div class="subscribe-form sub-form-2 text-lg-end mb-25">
                    <input type="text" placeholder="Enter Your Mail">
                    <button type="submit">Subscribe</button>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- newsletter-section end -->

</main>
